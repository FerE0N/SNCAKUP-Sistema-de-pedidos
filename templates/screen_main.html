<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <title>SNACKUP - Pedidos</title>
  <!DOCTYPE html>
  <html lang="es">

  <head>
    <meta charset="UTF-8">
    <title>SNACKUP - Pedidos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="{{ url_for('static', filename='order.js') }}" defer></script>
  </head>

<body class="bento-container">

  <!--  HEADER GLOBAL -->
  <header>
    <div class="header-content">
      <!-- Spacer to center title -->
      <div style="width: 40px;"></div>

      <span class="header-title">SNACKUP</span>

      <!-- Logout Button (Top Right) -->
      <a href="/logout" class="btn-logout-header" title="Cerrar Sesi贸n">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
          <line x1="12" y1="2" x2="12" y2="12"></line>
        </svg>
      </a>
    </div>
  </header>

  <div class="main-layout">

    <!--  COLUMNA IZQUIERDA: MEN -->
    <section id="section-menu" class="bento-box">
      <h1>Men煤</h1>
      <p class="note">Selecciona los productos que deseas ordenar.</p>

      <!-- Filtros -->
      <div class="category-filters">
        <button class="filter-btn active" data-filter="all">Todos</button>
        <button class="filter-btn" data-filter="food">Comidas</button>
        <button class="filter-btn" data-filter="drink">Bebidas</button>
      </div>

      <div class="product-grid">
        {% for product in products %}
        <div class="product-card" data-type="{{ 'food' if 'Comida' in product.get_description() else 'drink' }}">
          <img src="{{ product.image_url }}" alt="{{ product.name }}">
          <span class="product-name">{{ product.name }}</span>
          <span class="product-price">${{ product.get_price() }}</span>
          <button class="btn-add" data-name="{{ product.name }}" data-price="{{ product.get_price() }}">
            Agregar +
          </button>
        </div>
        {% endfor %}
      </div>
    </section>

    <!--  COLUMNA DERECHA: RESUMEN Y CONFIRMACIN -->
    <section id="section-order" class="bento-box">
      <h1>Mi Pedido</h1>

      <!-- Carrito -->
      <div class="bento-subbox">
        <h3>Carrito</h3>
        <ul id="cart-items">
          <li class="note">Tu carrito est谩 vac铆o.</li>
        </ul>
        <p style="text-align: right; font-weight: 700; margin-top: 1rem;">
          Total estimado: <span id="cart-total">$0.00</span>
        </p>
      </div>

      <!-- Datos del Cliente -->
      <div class="bento-subbox">
        <h3>Datos</h3>
        <label for="clientName">Nombre:</label>
        <input type="text" id="clientName" placeholder="Tu nombre" value="{{ username }}" readonly>
        <small class="note">Sesi贸n iniciada como {{ username }}</small>

        <label for="discountType" style="margin-top: 1rem; display:block;">Descuento:</label>
        <select id="discountType">
          <option value="none">Ninguno</option>
          <option value="student">Estudiante (10%)</option>
          <option value="happy_hour">Happy Hour (20%)</option>
        </select>
      </div>

      <!-- Bot贸n Confirmar -->
      <div style="margin-top: 2rem;">
        <button id="btnConfirmOrder" class="btn-primary">Confirmar Pedido</button>
      </div>

      <!-- QR Result (Oculto inicialmente) -->
      <div id="qrSection" class="bento-subbox hidden">
        <h3>隆Pedido Confirmado!</h3>
        <p>Muestra este c贸digo en caja:</p>
        <img id="qrImage" alt="C贸digo QR de pedido">
        <button id="btnCloseQR" class="btn-add"
          style="background: white; color: var(--color-tertiary); margin-top: 1rem;">Cerrar</button>
      </div>
    </section>

  </div>

  <!-- Secci贸n Historial (Separada) -->
  <div class="history-layout" style="width: 90%; max-width: 1200px; margin: 2rem auto;">
    <section class="bento-box">
      <h2>Historial de Pedidos</h2>
      <button id="btnLoadOrders" class="btn-add" style="width: auto; background: var(--color-tertiary);">Actualizar
        Historial</button>
      <div class="orders-container" id="ordersContainer">
        <p class="note">Carga los pedidos para ver el historial.</p>
      </div>
    </section>
  </div>

</body>

</html>